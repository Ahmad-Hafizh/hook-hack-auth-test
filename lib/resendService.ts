import { Resend } from "resend";

const resend = new Resend(process.env.RESEND_API_KEY);

export async function sendOnboardingEmailWithResend(
  email: string,
  name: string
) {
  try {
    const { data, error } = await resend.emails.send({
      from: "Your App <onboarding@hook-hack.com>",
      to: email,
      subject: "Welcome to Hook-Hack!",
      html: `
        <div style="background:#272727;padding:40px 0 32px 0;text-align:center;font-family:sans-serif;color:#fff;min-height:100vh;">
          <div style="max-width:480px;margin:0 auto;background:#1a1a1a;border-radius:16px;padding:32px 24px 24px 24px;box-shadow:0 4px 24px rgba(0,0,0,0.12);">
            <div style="margin-bottom:32px;">
              <!-- Inline SVG logo -->
              <div style="display:flex;justify-content:center;align-items:center;margin-bottom:16px;">
                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" zoomAndPan="magnify" preserveAspectRatio="xMidYMid meet" version="1.2" viewBox="47.2 140.61 278.81 77.52" width="180" height="40"><defs><clipPath id="6b4ca2cc70"><path d="M 190.90625 190.503906 L 326.015625 190.503906 L 326.015625 195.90625 L 190.90625 195.90625 Z M 190.90625 190.503906 "/></clipPath><clipPath id="242ed17313"><path d="M 47.199219 190.503906 L 190.90625 190.503906 L 190.90625 195.90625 L 47.199219 195.90625 Z M 47.199219 190.503906 "/></clipPath><filter x="0%" y="0%" width="100%" filterUnits="objectBoundingBox" id="77031b2f44" height="100%"><feColorMatrix values="0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 1 0" type="matrix" in="SourceGraphic"/></filter><clipPath id="2f529d787c"><rect x="0" width="145" y="0" height="73"/></clipPath><clipPath id="2473489a42"><path d="M 4 4 L 41.761719 4 L 41.761719 52 L 4 52 Z M 4 4 "/></clipPath><clipPath id="7d9c9f9436"><rect x="0" width="42" y="0" height="73"/></clipPath><clipPath id="90636dc6e7"><rect x="0" width="41" y="0" height="73"/></clipPath><clipPath id="e657c86edf"><path d="M 2 21 L 36.839844 21 L 36.839844 53 L 2 53 Z M 2 21 "/></clipPath><clipPath id="a436e1893e"><rect x="0" width="37" y="0" height="73"/></clipPath></defs><g id="8af7cc1444"><g clip-rule="nonzero" clip-path="url(#6b4ca2cc70)"><path style=" stroke:none;fill-rule:nonzero;fill:#1ff4ee;fill-opacity:1;" d="M 190.90625 190.503906 L 326.011719 190.503906 L 326.011719 195.90625 L 190.90625 195.90625 Z M 190.90625 190.503906 "/></g><g clip-rule="nonzero" clip-path="url(#242ed17313)"><path style=" stroke:none;fill-rule:nonzero;fill:#eb0042;fill-opacity:1;" d="M 47.199219 190.503906 L 190.910156 190.503906 L 190.910156 195.90625 L 47.199219 195.90625 Z M 47.199219 190.503906 "/></g><g mask="url(#63995a3f6f)" transform="matrix(1,0,0,1,48,138)"><g clip-path="url(#2f529d787c)"><g style="fill:#ffffff;fill-opacity:1;"><g transform="translate(1.328045, 51.910393)"><path style="stroke:none" d="M 14.21875 -18.96875 L 14.21875 0 L 3.4375 0 L 3.4375 -47.296875 L 14.21875 -47.296875 L 14.21875 -28.4375 L 29.46875 -28.4375 L 29.46875 -47.296875 L 40.25 -47.296875 L 40.25 0 L 29.46875 0 L 29.46875 -18.96875 Z M 14.21875 -18.96875 "/></g></g><g style="fill:#ffffff;fill-opacity:1;"><g transform="translate(39.616974, 51.910393)"><path style="stroke:none" d="M 6.21875 -3.5 C 2.945312 -6.40625 1.3125 -10.128906 1.3125 -14.671875 C 1.3125 -19.222656 3.007812 -22.957031 6.40625 -25.875 C 9.8125 -28.800781 14.019531 -30.265625 19.03125 -30.265625 C 23.957031 -30.265625 28.113281 -28.789062 31.5 -25.84375 C 34.882812 -22.90625 36.578125 -19.179688 36.578125 -14.671875 C 36.578125 -10.160156 34.921875 -6.441406 31.609375 -3.515625 C 28.304688 -0.597656 24.113281 0.859375 19.03125 0.859375 C 13.757812 0.859375 9.488281 -0.59375 6.21875 -3.5 Z M 14.0625 -19.65625 C 12.75 -18.363281 12.09375 -16.703125 12.09375 -14.671875 C 12.09375 -12.648438 12.722656 -11 13.984375 -9.71875 C 15.242188 -8.4375 16.90625 -7.796875 18.96875 -7.796875 C 20.957031 -7.796875 22.59375 -8.441406 23.875 -9.734375 C 25.15625 -11.035156 25.796875 -12.679688 25.796875 -14.671875 C 25.796875 -16.703125 25.132812 -18.363281 23.8125 -19.65625 C 22.5 -20.957031 20.882812 -21.609375 18.96875 -21.609375 C 17.019531 -21.609375 15.382812 -20.957031 14.0625 -19.65625 Z M 14.0625 -19.65625 "/></g></g><g style="fill:#ffffff;fill-opacity:1;"><g transform="translate(72.116553, 51.910393)"><path style="stroke:none" d="M 6.21875 -3.5 C 2.945312 -6.40625 1.3125 -10.128906 1.3125 -14.671875 C 1.3125 -19.222656 3.007812 -22.957031 6.40625 -25.875 C 9.8125 -28.800781 14.019531 -30.265625 19.03125 -30.265625 C 23.957031 -30.265625 28.113281 -28.789062 31.5 -25.84375 C 34.882812 -22.90625 36.578125 -19.179688 36.578125 -14.671875 C 36.578125 -10.160156 34.921875 -6.441406 31.609375 -3.515625 C 28.304688 -0.597656 24.113281 0.859375 19.03125 0.859375 C 13.757812 0.859375 9.488281 -0.59375 6.21875 -3.5 Z M 14.0625 -19.65625 C 12.75 -18.363281 12.09375 -16.703125 12.09375 -14.671875 C 12.09375 -12.648438 12.722656 -11 13.984375 -9.71875 C 15.242188 -8.4375 16.90625 -7.796875 18.96875 -7.796875 C 20.957031 -7.796875 22.59375 -8.441406 23.875 -9.734375 C 25.15625 -11.035156 25.796875 -12.679688 25.796875 -14.671875 C 25.796875 -16.703125 25.132812 -18.363281 23.8125 -19.65625 C 22.5 -20.957031 20.882812 -21.609375 18.96875 -21.609375 C 17.019531 -21.609375 15.382812 -20.957031 14.0625 -19.65625 Z M 14.0625 -19.65625 "/></g></g><g style="fill:#ffffff;fill-opacity:1;"><g transform="translate(104.616133, 51.910393)"><path style="stroke:none" d="M 37.03125 -29.40625 L 23.046875 -15.359375 L 38.40625 0 L 25.34375 0 L 13.59375 -11.75 L 13.59375 0 L 3.4375 0 L 3.4375 -49.296875 L 13.59375 -49.296875 L 13.59375 -19.140625 L 23.84375 -29.40625 Z M 37.03125 -29.40625 "/></g></g></g><mask id="63995a3f6f"><g filter="url(#77031b2f44)"><rect x="0" width="375" y="0" height="374.999991" style="fill:#000000;fill-opacity:0.95;stroke:none;"/></g></mask></g><g mask="url(#7768db6f0b)" transform="matrix(1,0,0,1,186,138)"><g clip-path="url(#7d9c9f9436)"><g clip-rule="nonzero" clip-path="url(#2473489a42)"><g style="fill:#ffffff;fill-opacity:1;"><g transform="translate(1.180202, 51.910393)"><path style="stroke:none" d="M 14.21875 -18.96875 L 14.21875 0 L 3.4375 0 L 3.4375 -47.296875 L 14.21875 -47.296875 L 14.21875 -28.4375 L 29.46875 -28.4375 L 29.46875 -47.296875 L 40.25 -47.296875 L 40.25 0 L 29.46875 0 L 29.46875 -18.96875 Z M 14.21875 -18.96875 "/></g></g></g></g><mask id="7768db6f0b"><g filter="url(#77031b2f44)"><rect x="0" width="375" y="0" height="374.999991" style="fill:#000000;fill-opacity:0.95;stroke:none;"/></g></mask></g><g mask="url(#0e5e73e105)" transform="matrix(1,0,0,1,283,138)"><g clip-path="url(#90636dc6e7)"><g style="fill:#ffffff;fill-opacity:1;"><g transform="translate(1.376442, 51.910393)"><path style="stroke:none" d="M 37.03125 -29.40625 L 23.046875 -15.359375 L 38.40625 0 L 25.34375 0 L 13.59375 -11.75 L 13.59375 0 L 3.4375 0 L 3.4375 -49.296875 L 13.59375 -49.296875 L 13.59375 -19.140625 L 23.84375 -29.40625 Z M 37.03125 -29.40625 "/></g></g></g><mask id="0e5e73e105"><g filter="url(#77031b2f44)"><rect x="0" width="375" y="0" height="374.999991" style="fill:#000000;fill-opacity:0.95;stroke:none;"/></g></mask></g><g mask="url(#3facf4b41a)" transform="matrix(1,0,0,1,225,138)"><g clip-path="url(#a436e1893e)"><g clip-rule="nonzero" clip-path="url(#e657c86edf)"><g style="fill:#ffffff;fill-opacity:1;"><g transform="translate(0.956503, 51.910393)"><path style="stroke:none" d="M 5.4375 -3.640625 C 2.6875 -6.640625 1.3125 -10.316406 1.3125 -14.671875 C 1.3125 -19.035156 2.6875 -22.722656 5.4375 -25.734375 C 8.195312 -28.753906 11.695312 -30.265625 15.9375 -30.265625 C 19.832031 -30.265625 23.039062 -29.039062 25.5625 -26.59375 L 25.5625 -29.40625 L 35.71875 -29.40625 L 35.71875 0 L 25.6875 0 L 25.6875 -3.328125 L 25.5625 -3.328125 C 23.039062 -0.535156 19.832031 0.859375 15.9375 0.859375 C 11.695312 0.859375 8.195312 -0.640625 5.4375 -3.640625 Z M 14.0625 -19.65625 C 12.75 -18.363281 12.09375 -16.703125 12.09375 -14.671875 C 12.09375 -12.648438 12.722656 -11 13.984375 -9.71875 C 15.242188 -8.4375 16.90625 -7.796875 18.96875 -7.796875 C 20.957031 -7.796875 22.59375 -8.441406 23.875 -9.734375 C 25.15625 -11.035156 25.796875 -12.679688 25.796875 -14.671875 C 25.796875 -16.703125 25.132812 -18.363281 23.8125 -19.65625 C 22.5 -20.957031 20.882812 -21.609375 18.96875 -21.609375 C 17.019531 -21.609375 15.382812 -20.957031 14.0625 -19.65625 Z M 14.0625 -19.65625 "/></g></g></g></g><mask id="3facf4b41a"><g filter="url(#77031b2f44)"><rect x="0" width="375" y="0" height="374.999991" style="fill:#000000;fill-opacity:0.95;stroke:none;"/></g></mask></g><g style="fill:#ffffff;fill-opacity:1;"><g transform="translate(260.339399, 189.910394)"><path style="stroke:none" d="M 19.09375 -21.953125 C 17.175781 -21.953125 15.53125 -21.242188 14.15625 -19.828125 C 12.78125 -18.421875 12.09375 -16.722656 12.09375 -14.734375 C 12.09375 -12.703125 12.78125 -10.976562 14.15625 -9.5625 C 15.53125 -8.15625 17.175781 -7.453125 19.09375 -7.453125 C 20.007812 -7.453125 20.878906 -7.566406 21.703125 -7.796875 C 22.523438 -8.023438 23.125 -8.253906 23.5 -8.484375 L 24.015625 -8.828125 L 27.453125 -1.78125 C 27.191406 -1.582031 26.820312 -1.335938 26.34375 -1.046875 C 25.863281 -0.765625 24.773438 -0.378906 23.078125 0.109375 C 21.378906 0.609375 19.550781 0.859375 17.59375 0.859375 C 13.28125 0.859375 9.488281 -0.65625 6.21875 -3.6875 C 2.945312 -6.726562 1.3125 -10.375 1.3125 -14.625 C 1.3125 -18.90625 2.945312 -22.582031 6.21875 -25.65625 C 9.488281 -28.726562 13.28125 -30.265625 17.59375 -30.265625 C 19.550781 -30.265625 21.347656 -30.035156 22.984375 -29.578125 C 24.628906 -29.117188 25.796875 -28.660156 26.484375 -28.203125 L 27.453125 -27.515625 L 24.015625 -20.578125 C 22.753906 -21.492188 21.113281 -21.953125 19.09375 -21.953125 Z M 19.09375 -21.953125 "/></g></g></g></g></g></svg>
              </div>
              <h1 style="color:#fe2858;font-size:2.2rem;margin:0 0 8px 0;font-weight:800;letter-spacing:-1px;">Welcome, ${name}!</h1>
              <p style="color:#fff;font-size:1.1rem;margin:0 0 16px 0;">We're excited to have you on board.</p>
            </div>
            <div style="margin-bottom:24px;">
              <p style="color:#fff;font-size:1rem;margin:0 0 8px 0;">Start exploring your dashboard now and make the most of your experience.</p>
            </div>
            <a href="https://hook-hack.com/dashboard" style="display:inline-block;padding:14px 36px;background:#fe2858;color:#fff;border-radius:8px;font-size:1.1rem;font-weight:700;text-decoration:none;letter-spacing:0.5px;box-shadow:0 2px 8px rgba(254,40,88,0.12);margin-top:8px;">Go to Dashboard</a>
            <div style="margin-top:32px;color:#aaa;font-size:0.95rem;">If you have any questions, just reply to this email. We're here to help!</div>
          </div>
        </div>
      `,
    });

    if (error) {
      return { success: false, error };
    }
    return { success: true, data };
  } catch (err) {
    return { success: false, error: err };
  }
}
